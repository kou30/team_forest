<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ page import="model.User,model.Reserve,java.util.List" %>
<%
// セッションスコープからユーザー情報を取得
User loginUser = (User) session.getAttribute("loginUser");
List<Reserve> reserveList = (List<Reserve>) request.getAttribute("reserveList");
%>
<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>にゃんチャンス</title>
	<link rel="stylesheet" href="CSS/style.css">
</head>
<body>
	<div class="wrapper">
		<!-- ヘッダー -->
		<div align="right" class="example-r">
<% if(loginUser == null) { %>
    			<br><button onclick="location.href='/nyanChance/Login'">ログイン</button><br>
<% } else { %>
     			<br><button onclick="location.href='/nyanChance/Logout'"><%= loginUser.getName() %></button><br>
<% } %>
		</div>
		<br>
		<header class="header">
			<nav class="nav">
				<ul>
					<li><a href="/nyanChance/Home?action=done">ホーム</a></li>
					<li><a href="/nyanChance/CatList?action=done">ネコ一覧</a></li>
<% if(loginUser != null) { %>
					<li><a href="/nyanChance/ReservationStatus?action=done">予約状況</a></li>
					<li><a href="/nyanChance/Achievement?action=done">実績</a></li>
<% } %>
				</ul>
			</nav>
		</header>
		<!-- ヘッダー ここまで -->
		<!-- メイン -->
		<main>
			<h2>予約状況</h2>
			<!-- #####################
			### ここにコードを書く ###
			#######################-->
			<%for(Reserve reserve:reserveList){ %>
			<p><%=reserve.getId() %></p>
			<p><%=reserve.getUserName() %></p>
			<p><%=reserve.getCatId() %></p>
			<p><%=reserve.getDate() %></p>
			<p><%=reserve.getComment() %></p>
	        <form
	            action="/nyanChance/ReservationStatus?action=done"
	            method="POST"
	        >
	        	<input type="hidden" name="reserveId" value="<%=reserve.getId() %>">
	            <input type="submit" value="　削　除　">
	        </form>


			<%} %>
		</main>
		<!-- メイン ここまで -->
		<!-- フッタ -->
		<footer class="footer">
			<p>&copy;Copyright Nyan Chance. All rights reserved.</p>
		</footer>
		<!-- フッタ ここまで -->
	</div>
</body>
</html>